import{_ as t,S as e,bs as a,P as i,ax as o,k as r,aT as n,G as s,m as l,d as h,C as d,ag as u,a as p,o as c,ab as g,aa as f,aM as m,aA as y,q as v,e as _,cF as x,aO as b,x as S,cG as w,bt as M,w as I,Q as A,aZ as D,a2 as L,cH as R,b$ as C,f as O,av as z,K as P,cI as k,b as Z,h as E,Y as T,aL as B,b6 as V,cJ as H,cK as N,b3 as W,ae as G,J as Y,cL as F,aQ as X,X as U,aP as j,u as K}from"./install.f743767a.js";import{c as q,i as J,d as Q}from"./dataSample.f45482cc.js";import{c as $,g as tt,a as et}from"./labelHelper.1919236e.js";import{D as at,c as it,a as ot,i as rt,g as nt}from"./installCommon.e6fb8a9d.js";import{s as st}from"./sliderMove.9fa02ce2.js";import{R as lt}from"./RoamController.258ec694.js";var ht=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return t(a,e),a.prototype.getInitialData=function(t,e){return $(this.getSource(),this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(t){var e=this.coordinateSystem;if(e){var a=e.dataToPoint(e.clampData(t)),i=this.getData(),o=i.getLayout("offset"),r=i.getLayout("size");return a[e.getBaseAxis().isHorizontal()?0:1]+=o+r/2,a}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(e);e.registerClass(ht);var dt=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t}return t(i,e),i.prototype.getInitialData=function(){return $(this.getSource(),this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},i.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},i.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},i.prototype.brushSelector=function(t,e,a){return a.rect(e.getItemLayout(t))},i.type="series.bar",i.dependencies=["grid","polar"],i.defaultOption=a(ht.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),i}(ht),ut=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},pt=function(e){function a(t){var a=e.call(this,t)||this;return a.type="sausage",a}return t(a,e),a.prototype.getDefaultShape=function(){return new ut},a.prototype.buildPath=function(t,e){var a=e.cx,i=e.cy,o=Math.max(e.r0||0,0),r=Math.max(e.r,0),n=.5*(r-o),s=o+n,l=e.startAngle,h=e.endAngle,d=e.clockwise,u=Math.cos(l),p=Math.sin(l),c=Math.cos(h),g=Math.sin(h);(d?h-l<2*Math.PI:l-h<2*Math.PI)&&(t.moveTo(u*o+a,p*o+i),t.arc(u*s+a,p*s+i,n,-Math.PI+l,l,!d)),t.arc(a,i,r,l,h,!d),t.moveTo(c*r+a,g*r+i),t.arc(c*s+a,g*s+i,n,h-2*Math.PI,h-Math.PI,!d),0!==o&&(t.arc(a,i,o,h,l,d),t.moveTo(u*o+a,g*o+i)),t.closePath()},a}(i),ct=[0,0],gt=Math.max,ft=Math.min;var mt=function(e){function a(){var t=e.call(this)||this;return t.type=a.type,t._isFirstFrame=!0,t}return t(a,e),a.prototype.render=function(t,e,a,i){this._model=t,this._removeOnRenderedListener(a),this._updateDrawMode(t);var o=t.get("coordinateSystem");"cartesian2d"!==o&&"polar"!==o||(this._isLargeDraw?this._renderLarge(t,e,a):this._renderNormal(t,e,a,i))},a.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},a.prototype.incrementalRender=function(t,e){this._incrementalRenderLarge(t,e)},a.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},a.prototype._renderNormal=function(t,e,a,i){var l,h=this.group,d=t.getData(),p=this._data,c=t.coordinateSystem,g=c.getBaseAxis();"cartesian2d"===c.type?l=g.isHorizontal():"polar"===c.type&&(l="angle"===g.dim);var f=t.isAnimationEnabled()?t:null,m=function(t,e){var a=t.get("realtimeSort",!0),i=e.getBaseAxis();if(a&&"category"===i.type&&"cartesian2d"===e.type)return{baseAxis:i,otherAxis:e.getOtherAxis(i)}}(t,c);m&&this._enableRealtimeSort(m,d,a);var y=t.get("clip",!0)||m,v=function(t,e){var a=t.getArea&&t.getArea();if(J(t,"cartesian2d")){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var o=e.getLayout("bandWidth");i.isHorizontal()?(a.x-=o,a.width+=2*o):(a.y-=o,a.height+=2*o)}}return a}(c,d);h.removeClipPath();var _=t.get("roundCap",!0),x=t.get("showBackground",!0),S=t.getModel("backgroundStyle"),w=S.get("borderRadius")||0,M=[],I=this._backgroundEls,A=i&&i.isInitSort,D=i&&"changeAxisOrder"===i.type;function L(t){var e=xt[c.type](d,t),a=function(t,e,a){return new("polar"===t.type?b:u)({shape:At(e,a,t),silent:!0,z2:0})}(c,l,e);return a.useStyle(S.getItemStyle()),"cartesian2d"===c.type&&a.setShape("r",w),M[t]=a,a}d.diff(p).add((function(e){var a=d.getItemModel(e),i=xt[c.type](d,e,a);if(x&&L(e),d.hasValue(e)){var r=!1;y&&(r=yt[c.type](v,i));var n=vt[c.type](t,d,e,i,l,f,g.model,!1,_);bt(n,d,e,a,i,t,l,"polar"===c.type),A?n.attr({shape:i}):m?_t(m,f,n,i,e,l,!1,!1):o(n,{shape:i},t,e),d.setItemGraphicEl(e,n),h.add(n),n.ignore=r}})).update((function(e,a){var i=d.getItemModel(e),o=xt[c.type](d,e,i);if(x){var n=void 0;0===I.length?n=L(a):((n=I[a]).useStyle(S.getItemStyle()),"cartesian2d"===c.type&&n.setShape("r",w),M[e]=n);var s=xt[c.type](d,e),u=At(l,s,c);r(n,{shape:u},f,e)}var b=p.getItemGraphicEl(a);if(!d.hasValue(e))return h.remove(b),void(b=null);var R=!1;y&&(R=yt[c.type](v,o))&&h.remove(b),b||(b=vt[c.type](t,d,e,o,l,f,g.model,!!b,_)),D||bt(b,d,e,i,o,t,l,"polar"===c.type),A?b.attr({shape:o}):m?_t(m,f,b,o,e,l,!0,D):r(b,{shape:o},t,e,null),d.setItemGraphicEl(e,b),b.ignore=R,h.add(b)})).remove((function(e){var a=p.getItemGraphicEl(e);a&&n(a,t,e)})).execute();var R=this._backgroundGroup||(this._backgroundGroup=new s);R.removeAll();for(var C=0;C<M.length;++C)R.add(M[C]);h.add(R),this._backgroundEls=M,this._data=d},a.prototype._renderLarge=function(t,e,a){this._clear(),Mt(t,this.group),this._updateLargeClip(t)},a.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),Mt(e,this.group,!0)},a.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)?q(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},a.prototype._enableRealtimeSort=function(t,e,a){var i=this;if(e.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,a),this._isFirstFrame=!1;else{var r=function(t){var a=e.getItemGraphicEl(t);if(a){var i=a.shape;return(o.isHorizontal()?Math.abs(i.height):Math.abs(i.width))||0}return 0};this._onRendered=function(){i._updateSortWithinSameData(e,r,o,a)},a.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(t,e,a){var i=[];return t.each(t.mapDimension(e.dim),(function(t,e){var o=a(e);o=null==o?NaN:o,i.push({dataIndex:e,mappedValue:o,ordinalNumber:t})})),i.sort((function(t,e){return e.mappedValue-t.mappedValue})),{ordinalNumbers:l(i,(function(t){return t.ordinalNumber}))}},a.prototype._isOrderChangedWithinSameData=function(t,e,a){for(var i=a.scale,o=t.mapDimension(a.dim),r=Number.MAX_VALUE,n=0,s=i.getOrdinalMeta().categories.length;n<s;++n){var l=t.rawIndexOf(o,i.getRawOrdinalNumber(n)),h=l<0?Number.MIN_VALUE:e(t.indexOfRawIndex(l));if(h>r)return!0;r=h}return!1},a.prototype._isOrderDifferentInView=function(t,e){for(var a=e.scale,i=a.getExtent(),o=Math.max(0,i[0]),r=Math.min(i[1],a.getOrdinalMeta().categories.length-1);o<=r;++o)if(t.ordinalNumbers[o]!==a.getRawOrdinalNumber(o))return!0},a.prototype._updateSortWithinSameData=function(t,e,a,i){if(this._isOrderChangedWithinSameData(t,e,a)){var o=this._dataSort(t,a,e);this._isOrderDifferentInView(o,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:o}))}},a.prototype._dispatchInitSort=function(t,e,a){var i=e.baseAxis,o=this._dataSort(t,i,(function(a){return t.get(t.mapDimension(e.otherAxis.dim),a)}));a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o,animation:{duration:0}})},a.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},a.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},a.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(t){var e=this.group,a=this._data;t&&t.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl((function(e){n(e,t,h(e).dataIndex)}))):e.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(d),yt={cartesian2d:function(t,e){var a=e.width<0?-1:1,i=e.height<0?-1:1;a<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var o=t.x+t.width,r=t.y+t.height,n=gt(e.x,t.x),s=ft(e.x+e.width,o),l=gt(e.y,t.y),h=ft(e.y+e.height,r),d=s<n,u=h<l;return e.x=d&&n>o?s:n,e.y=u&&l>r?h:l,e.width=d?0:s-n,e.height=u?0:h-l,a<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),d||u},polar:function(t,e){var a=e.r0<=e.r?1:-1;if(a<0){var i=e.r;e.r=e.r0,e.r0=i}var o=ft(e.r,t.r),r=gt(e.r0,t.r0);e.r=o,e.r0=r;var n=o-r<0;if(a<0){i=e.r;e.r=e.r0,e.r0=i}return n}},vt={cartesian2d:function(t,e,a,i,o,r,n,s,l){var h=new u({shape:p({},i),z2:1});(h.__dataIndex=a,h.name="item",r)&&(h.shape[o?"height":"width"]=0);return h},polar:function(t,e,a,i,n,s,l,h,d){var u=i.startAngle<i.endAngle,p=new(!n&&d?pt:b)({shape:c({clockwise:u},i),z2:1});if(p.name="item",s){var g=n?"r":"endAngle",f={};p.shape[g]=n?0:i.startAngle,f[g]=i[g],(h?r:o)(p,{shape:f},s)}return p}};function _t(t,e,a,i,n,s,l,h){var d,u;s?(u={x:i.x,width:i.width},d={y:i.y,height:i.height}):(u={y:i.y,height:i.height},d={x:i.x,width:i.width}),h||(l?r:o)(a,{shape:d},e,n,null);var p=e?t.baseAxis.model:null;(l?r:o)(a,{shape:u},p,n)}var xt={cartesian2d:function(t,e,a){var i=t.getItemLayout(e),o=a?function(t,e){var a=t.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var i=t.get(["itemStyle","borderWidth"])||0,o=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),r=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(i,o,r)}(a,i):0,r=i.width>0?1:-1,n=i.height>0?1:-1;return{x:i.x+r*o/2,y:i.y+n*o/2,width:i.width-r*o,height:i.height-n*o}},polar:function(t,e,a){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function bt(t,e,a,i,o,r,n,s){var l=e.getItemVisual(a,"style");s||t.setShape("r",i.get(["itemStyle","borderRadius"])||0),t.useStyle(l);var h=i.getShallow("cursor");if(h&&t.attr("cursor",h),!s){var d=n?o.height>0?"bottom":"top":o.width>0?"left":"right",u=g(i);f(t,u,{labelFetcher:r,labelDataIndex:a,defaultText:tt(r.getData(),a),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var p=t.getTextContent();m(p,u,r.getRawValue(a),(function(t){return et(e,t)}))}var c=i.getModel(["emphasis"]);y(t,c.get("focus"),c.get("blurScope")),v(t,i),function(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}(o)&&(t.style.fill="none",t.style.stroke="none",_(t.states,(function(t){t.style&&(t.style.fill=t.style.stroke="none")})))}var St=function(){},wt=function(e){function a(t){var a=e.call(this,t)||this;return a.type="largeBar",a}return t(a,e),a.prototype.getDefaultShape=function(){return new St},a.prototype.buildPath=function(t,e){for(var a=e.points,i=this.__startPoint,o=this.__baseDimIdx,r=0;r<a.length;r+=2)i[o]=a[r+o],t.moveTo(i[0],i[1]),t.lineTo(a[r],a[r+1])},a}(i);function Mt(t,e,a){var i=t.getData(),o=[],r=i.getLayout("valueAxisHorizontal")?1:0;o[1-r]=i.getLayout("valueAxisStart");var n=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=t.getModel("backgroundStyle");if(t.get("showBackground",!0)){var d=i.getLayout("largeBackgroundPoints"),u=[];u[1-r]=i.getLayout("backgroundStart");var c=new wt({shape:{points:d},incremental:!!a,silent:!0,z2:0});c.__startPoint=u,c.__baseDimIdx=r,c.__largeDataIndices=n,c.__barWidth=s,function(t,e,a){var i=e.get("borderColor")||e.get("color"),o=e.getItemStyle();t.useStyle(o),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=a.getLayout("barWidth")}(c,l,i),e.add(c)}var g=new wt({shape:{points:i.getLayout("largePoints")},incremental:!!a});g.__startPoint=o,g.__baseDimIdx=r,g.__largeDataIndices=n,g.__barWidth=s,e.add(g),function(t,e,a){var i=a.getVisual("style");t.useStyle(p({},i)),t.style.fill=null,t.style.stroke=i.fill,t.style.lineWidth=a.getLayout("barWidth")}(g,0,i),h(g).seriesIndex=t.seriesIndex,t.get("silent")||(g.on("mousedown",It),g.on("mousemove",It))}var It=x((function(t){var e=function(t,e,a){var i=t.__baseDimIdx,o=1-i,r=t.shape.points,n=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),l=t.__startPoint[o];ct[0]=e,ct[1]=a;for(var h=ct[i],d=ct[1-i],u=h-s,p=h+s,c=0,g=r.length/2;c<g;c++){var f=2*c,m=r[f+i],y=r[f+o];if(m>=u&&m<=p&&(l<=y?d>=l&&d<=y:d>=y&&d<=l))return n[c]}return-1}(this,t.offsetX,t.offsetY);h(this).dataIndex=e>=0?e:null}),30,!1);function At(t,e,a){if(J(a,"cartesian2d")){var i=e,o=a.getArea();return{x:t?i.x:o.x,y:t?o.y:i.y,width:t?i.width:o.width,height:t?o.height:i.height}}var r=e;return{cx:(o=a.getArea()).cx,cy:o.cy,r0:t?o.r0:r.r0,r:t?o.r:r.r,startAngle:t?r.startAngle:0,endAngle:t?r.endAngle:2*Math.PI}}function Dt(t){t.registerChartView(mt),t.registerSeriesModel(dt),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,S(M,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,w),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Q("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(t,e){var a=t.componentType||"series";e.eachComponent({mainType:a,query:t},(function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)}))}))}var Lt=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t}return t(i,e),i.type="dataZoom.inside",i.defaultOption=a(at.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),i}(at),Rt=I();function Ct(t,e,a){Rt(t).coordSysRecordMap.each((function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=a)}))}function Ot(t,e){if(e){t.removeKey(e.model.uid);var a=e.controller;a&&a.dispose()}}function zt(t,e){t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Pt(t,e,a,i){return t.coordinateSystem.containPoint([a,i])}function kt(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var a=Rt(e),i=a.coordSysRecordMap||(a.coordSysRecordMap=A());i.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var a=it(t);_(a.infoList,(function(a){var o=a.model.uid,r=i.get(o)||i.set(o,function(t,e){var a={model:e,containsPoint:S(Pt,e),dispatchAction:S(zt,t),dataZoomInfoMap:null,controller:null},i=a.controller=new lt(t.getZr());return _(["pan","zoom","scrollMove"],(function(t){i.on(t,(function(e){var i=[];a.dataZoomInfoMap.each((function(o){if(e.isAvailableBehavior(o.model.option)){var r=(o.getRange||{})[t],n=r&&r(o.dzReferCoordSysInfo,a.model.mainType,a.controller,e);!o.model.get("disabled",!0)&&n&&i.push({dataZoomId:o.model.id,start:n[0],end:n[1]})}})),i.length&&a.dispatchAction(i)}))})),a}(e,a.model));(r.dataZoomInfoMap||(r.dataZoomInfoMap=A())).set(t.uid,{dzReferCoordSysInfo:a,model:t,getRange:null})}))})),i.each((function(t){var e,a=t.controller,o=t.dataZoomInfoMap;if(o){var r=o.keys()[0];null!=r&&(e=o.get(r))}if(e){var n=function(t){var e,a="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return t.each((function(t){var r=t.model,n=!r.get("disabled",!0)&&(!r.get("zoomLock",!0)||"move");i[a+n]>i[a+e]&&(e=n),o=o&&r.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}(o);a.enable(n.controlType,n.opt),a.setPointerChecker(t.containsPoint),D(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else Ot(i,t)}))}))}var Zt=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return t(a,e),a.prototype.render=function(t,a,i){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),Ct(i,t,{pan:L(Et.pan,this),zoom:L(Et.zoom,this),scrollMove:L(Et.scrollMove,this)}))},a.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){!function(t,e){for(var a=Rt(t).coordSysRecordMap,i=a.keys(),o=0;o<i.length;o++){var r=i[o],n=a.get(r),s=n.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||Ot(a,n))}}}(this.api,this.dataZoomModel),this.range=null},a.type="dataZoom.inside",a}(ot),Et={zoom:function(t,e,a,i){var o=this.range,r=o.slice(),n=t.axisModels[0];if(n){var s=Bt[e](null,[i.originX,i.originY],n,a,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(r[1]-r[0])+r[0],h=Math.max(1/i.scale,0);r[0]=(r[0]-l)*h+l,r[1]=(r[1]-l)*h+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return st(0,r,[0,100],0,d.minSpan,d.maxSpan),this.range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}},pan:Tt((function(t,e,a,i,o,r){var n=Bt[i]([r.oldX,r.oldY],[r.newX,r.newY],e,o,a);return n.signal*(t[1]-t[0])*n.pixel/n.pixelLength})),scrollMove:Tt((function(t,e,a,i,o,r){return Bt[i]([0,0],[r.scrollDelta,r.scrollDelta],e,o,a).signal*(t[1]-t[0])*r.scrollDelta}))};function Tt(t){return function(e,a,i,o){var r=this.range,n=r.slice(),s=e.axisModels[0];if(s){var l=t(n,s,e,a,i,o);return st(l,n,[0,100],"all"),this.range=n,r[0]!==n[0]||r[1]!==n[1]?n:void 0}}}var Bt={grid:function(t,e,a,i,o){var r=a.axis,n={},s=o.model.coordinateSystem.getRect();return t=t||[0,0],"x"===r.dim?(n.pixel=e[0]-t[0],n.pixelLength=s.width,n.pixelStart=s.x,n.signal=r.inverse?1:-1):(n.pixel=e[1]-t[1],n.pixelLength=s.height,n.pixelStart=s.y,n.signal=r.inverse?-1:1),n},polar:function(t,e,a,i,o){var r=a.axis,n={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),h=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===a.mainType?(n.pixel=e[0]-t[0],n.pixelLength=l[1]-l[0],n.pixelStart=l[0],n.signal=r.inverse?1:-1):(n.pixel=e[1]-t[1],n.pixelLength=h[1]-h[0],n.pixelStart=h[0],n.signal=r.inverse?-1:1),n},singleAxis:function(t,e,a,i,o){var r=a.axis,n=o.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===r.orient?(s.pixel=e[0]-t[0],s.pixelLength=n.width,s.pixelStart=n.x,s.signal=r.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=n.height,s.pixelStart=n.y,s.signal=r.inverse?-1:1),s}};function Vt(t){rt(t),t.registerComponentModel(Lt),t.registerComponentView(Zt),kt(t)}var Ht=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t}return t(i,e),i.type="dataZoom.slider",i.layoutMode="box",i.defaultOption=a(at.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),i}(at),Nt=u,Wt=["line","bar","candlestick","scatter"],Gt={easing:"cubicOut",duration:100},Yt=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t._displayables={},t}return t(a,e),a.prototype.init=function(t,e){this.api=e,this._onBrush=L(this._onBrush,this),this._onBrushEnd=L(this._onBrushEnd,this)},a.prototype.render=function(t,a,i,o){if(e.prototype.render.apply(this,arguments),D(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},a.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){R(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},a.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new s;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},a.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,a=t.get("brushSelect")?7:0,i=this._findCoordRect(),o={width:e.getWidth(),height:e.getHeight()},r="horizontal"===this._orient?{right:o.width-i.x-i.width,top:o.height-30-7-a,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},n=C(t.option);_(["right","top","width","height"],(function(t){"ph"===n[t]&&(n[t]=r[t])}));var s=O(n,o);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],"vertical"===this._orient&&this._size.reverse()},a.prototype._positionGroup=function(){var t=this.group,e=this._location,a=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),r=this._displayables.sliderGroup,n=(this._dataShadowInfo||{}).otherAxisInverse;r.attr("horizontal"!==a||o?"horizontal"===a&&o?{scaleY:n?1:-1,scaleX:-1}:"vertical"!==a||o?{scaleY:n?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:n?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:n?1:-1,scaleX:1});var s=t.getBoundingRect([r]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},a.prototype._getViewExtent=function(){return[0,this._size[0]]},a.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,a=this._displayables.sliderGroup,i=t.get("brushSelect");a.add(new Nt({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new Nt({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:L(this._onClickPanel,this)}),r=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",r.on("mousemove",this._onBrush),r.on("mouseup",this._onBrushEnd)):(r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)),a.add(o)},a.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,a=t.series,i=a.getRawData(),o=a.getShadowDim?a.getShadowDim():t.otherDim;if(null!=o){var r=i.getDataExtent(o),n=.3*(r[1]-r[0]);r=[r[0]-n,r[1]+n];var l,h=[0,e[1]],d=[0,e[0]],u=[[e[0],0],[0,0]],p=[],c=d[1]/(i.count()-1),g=0,f=Math.round(i.count()/e[0]);i.each([o],(function(t,e){if(f>0&&e%f)g+=c;else{var a=null==t||isNaN(t)||""===t,i=a?0:z(t,r,h,!0);a&&!l&&e?(u.push([u[u.length-1][0],0]),p.push([p[p.length-1][0],0])):!a&&l&&(u.push([g,0]),p.push([g,0])),u.push([g,i]),p.push([g,i]),g+=c,l=a}}));for(var m,y,v,_,x,b=this.dataZoomModel,S=0;S<3;S++){var w=(m=1===S,y=void 0,v=void 0,_=void 0,x=void 0,y=b.getModel(m?"selectedDataBackground":"dataBackground"),v=new s,_=new U({shape:{points:u},segmentIgnoreThreshold:1,style:y.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),x=new j({shape:{points:p},segmentIgnoreThreshold:1,style:y.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),v.add(_),v.add(x),v);this._displayables.sliderGroup.add(w),this._displayables.dataShadowSegs.push(w)}}}},a.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var a,i=this.ecModel;return t.eachTargetAxis((function(o,r){var n=t.getAxisProxy(o,r).getTargetSeriesModels();_(n,(function(t){if(!(a||!0!==e&&P(Wt,t.get("type"))<0)){var n,s=i.getComponent(nt(o),r).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[o],h=t.coordinateSystem;null!=l&&h.getOtherAxis&&(n=h.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),a={thisAxis:s,series:t,thisDim:o,otherDim:l,otherAxisInverse:n}}}),this)}),this),a}},a.prototype._renderHandle=function(){var t=this.group,e=this._displayables,a=e.handles=[null,null],i=e.handleLabels=[null,null],o=this._displayables.sliderGroup,r=this._size,n=this.dataZoomModel,s=this.api,l=n.get("borderRadius")||0,h=n.get("brushSelect"),d=e.filler=new Nt({silent:h,style:{fill:n.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new Nt({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1],r:l},style:{stroke:n.get("dataBackgroundColor")||n.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),_([0,1],(function(e){var r=n.get("handleIcon");!k[r]&&r.indexOf("path://")<0&&r.indexOf("image://")<0&&(r="path://"+r);var s=Z(r,-1,0,2,2,null,!0);s.attr({cursor:Ft(this._orient),draggable:!0,drift:L(this._onDragMove,this,e),ondragend:L(this._onDragEnd,this),onmouseover:L(this._showDataInfo,this,!0),onmouseout:L(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),h=n.get("handleSize");this._handleHeight=E(h,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(n.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),y(s);var d=n.get("handleColor");null!=d&&(s.style.fill=d),o.add(a[e]=s);var u=n.getModel("textStyle");t.add(i[e]=new T({silent:!0,invisible:!0,style:B(u,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:u.getTextColor(),font:u.getFont()}),z2:10}))}),this);var p=d;if(h){var c=E(n.get("moveHandleSize"),r[1]),g=e.moveHandle=new u({style:n.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:r[1]-.5,height:c}}),f=.8*c,m=e.moveHandleIcon=Z(n.get("moveHandleIcon"),-f/2,-f/2,f,f,"#fff",!0);m.silent=!0,m.y=r[1]+c/2-.5,g.ensureState("emphasis").style=n.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(r[1]/2,Math.max(c,10));(p=e.moveZone=new u({invisible:!0,shape:{y:r[1]-v,height:c+v}})).on("mouseover",(function(){s.enterEmphasis(g)})).on("mouseout",(function(){s.leaveEmphasis(g)})),o.add(g),o.add(m),o.add(p)}p.attr({draggable:!0,cursor:Ft(this._orient),drift:L(this._onDragMove,this,"all"),ondragstart:L(this._showDataInfo,this,!0),ondragend:L(this._onDragEnd,this),onmouseover:L(this._showDataInfo,this,!0),onmouseout:L(this._showDataInfo,this,!1)})},a.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[z(t[0],[0,100],e,!0),z(t[1],[0,100],e,!0)]},a.prototype._updateInterval=function(t,e){var a=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),r=a.findRepresentativeAxisProxy().getMinMaxSpan(),n=[0,100];st(e,i,o,a.get("zoomLock")?"all":t,null!=r.minSpan?z(r.minSpan,n,o,!0):null,null!=r.maxSpan?z(r.maxSpan,n,o,!0):null);var s=this._range,l=this._range=V([z(i[0],o,n,!0),z(i[1],o,n,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},a.prototype._updateView=function(t){var e=this._displayables,a=this._handleEnds,i=V(a.slice()),o=this._size;_([0,1],(function(t){var i=e.handles[t],r=this._handleHeight;i.attr({scaleX:r/2,scaleY:r/2,x:a[t]+(t?-1:1),y:o[1]/2-r/2})}),this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var r={x:i[0],width:i[1]-i[0]};e.moveHandle&&(e.moveHandle.setShape(r),e.moveZone.setShape(r),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",r.x+r.width/2));for(var n=e.dataShadowSegs,s=[0,i[0],i[1],o[0]],l=0;l<n.length;l++){var h=n[l],d=h.getClipPath();d||(d=new u,h.setClipPath(d)),d.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:o[1]})}this._updateDataInfo(t)},a.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,a=this._displayables,i=a.handleLabels,o=this._orient,r=["",""];if(e.get("showDetail")){var n=e.findRepresentativeAxisProxy();if(n){var s=n.getAxisModel().axis,l=this._range,h=t?n.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:n.getDataValueWindow();r=[this._formatLabel(h[0],s),this._formatLabel(h[1],s)]}}var d=V(this._handleEnds.slice());function u(t){var e=H(a.handles[t].parent,this.group),n=N(0===t?"right":"left",e),s=this._handleWidth/2+5,l=W([d[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:"horizontal"===o?"middle":n,align:"horizontal"===o?n:"center",text:r[t]})}u.call(this,0),u.call(this,1)},a.prototype._formatLabel=function(t,e){var a=this.dataZoomModel,i=a.get("labelFormatter"),o=a.get("labelPrecision");null!=o&&"auto"!==o||(o=e.getPixelPrecision());var r=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return G(i)?i(t,r):Y(i)?i.replace("{value}",r):r},a.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,a=e.handleLabels;a[0].attr("invisible",!t),a[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},a.prototype._onDragMove=function(t,e,a,i){this._dragging=!0,F(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),r=W([e,a],o,!0),n=this._updateInterval(t,r[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),n&&s&&this._dispatchZoomAction(!0)},a.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},a.prototype._onClickPanel=function(t){var e=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(a[0]<0||a[0]>e[0]||a[1]<0||a[1]>e[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,r=this._updateInterval("all",a[0]-o);this._updateView(),r&&this._dispatchZoomAction(!1)}},a.prototype._onBrushStart=function(t){var e=t.offsetX,a=t.offsetY;this._brushStart=new X(e,a),this._brushing=!0,this._brushStartTime=+new Date},a.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var a=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(a.width)<5)){var i=this._getViewExtent(),o=[0,100];this._range=V([z(a.x,i,o,!0),z(a.x+a.width,i,o,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},a.prototype._onBrush=function(t){this._brushing&&(F(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},a.prototype._updateBrushRect=function(t,e){var a=this._displayables,i=this.dataZoomModel,o=a.brushRect;o||(o=a.brushRect=new Nt({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(o)),o.attr("ignore",!1);var r=this._brushStart,n=this._displayables.sliderGroup,s=n.transformCoordToLocal(t,e),l=n.transformCoordToLocal(r.x,r.y),h=this._size;s[0]=Math.max(Math.min(h[0],s[0]),0),o.setShape({x:l[0],y:0,width:s[0]-l[0],height:h[1]})},a.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Gt:null,start:e[0],end:e[1]})},a.prototype._findCoordRect=function(){var t,e=it(this.dataZoomModel).infoList;if(!t&&e.length){var a=e[0].model.coordinateSystem;t=a.getRect&&a.getRect()}if(!t){var i=this.api.getWidth(),o=this.api.getHeight();t={x:.2*i,y:.2*o,width:.6*i,height:.6*o}}return t},a.type="dataZoom.slider",a}(ot);function Ft(t){return"vertical"===t?"ns-resize":"ew-resize"}function Xt(t){t.registerComponentModel(Ht),t.registerComponentView(Yt),rt(t)}function Ut(t){K(Vt),K(Xt)}export{ht as B,pt as S,Ut as a,Vt as b,Xt as c,Dt as i};
