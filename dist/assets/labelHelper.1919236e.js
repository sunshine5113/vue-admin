import{b5 as e,e as n,Q as t,dy as s,dz as a,aI as i,m as r,bb as o,F as l,ae as d,x as u,bc as m,dA as g,L as f,dB as c,A as x,ca as y,cm as D}from"./install.f743767a.js";var p=function(e){this.coordSysDims=[],this.axisMap=t(),this.categoryAxisMap=t(),this.coordSysName=e};var v={cartesian2d:function(n,t,s,a){var i=n.getReferringComponents("xAxis",e).models[0],r=n.getReferringComponents("yAxis",e).models[0];t.coordSysDims=["x","y"],s.set("x",i),s.set("y",r),I(i)&&(a.set("x",i),t.firstCategoryDimIndex=0),I(r)&&(a.set("y",r),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,s,a){var i=n.getReferringComponents("singleAxis",e).models[0];t.coordSysDims=["single"],s.set("single",i),I(i)&&(a.set("single",i),t.firstCategoryDimIndex=0)},polar:function(n,t,s,a){var i=n.getReferringComponents("polar",e).models[0],r=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],s.set("radius",r),s.set("angle",o),I(r)&&(a.set("radius",r),t.firstCategoryDimIndex=0),I(o)&&(a.set("angle",o),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,n,t,s){n.coordSysDims=["lng","lat"]},parallel:function(e,t,s,a){var i=e.ecModel,r=i.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=r.dimensions.slice();n(r.parallelAxisIndex,(function(e,n){var r=i.getComponent("parallelAxis",e),l=o[n];s.set(l,r),I(r)&&(a.set(l,r),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=n))}))}};function I(e){return"category"===e.get("type")}function C(e,t,D){D=D||{},s(e)||(e=a(e));var I,C=t.get("coordinateSystem"),A=i.get(C),h=function(e){var n=e.get("coordinateSystem"),t=new p(n),s=v[n];if(s)return s(e,t,t.axisMap,t.categoryAxisMap),t}(t);h&&h.coordSysDims&&(I=r(h.coordSysDims,(function(e){var n={name:e},t=h.axisMap.get(e);if(t){var s=t.get("type");n.type=o(s)}return n}))),I||(I=A&&(A.getDimensionsInfo?A.getDimensionsInfo():A.dimensions.slice())||["x","y"]);var M,S,b=D.useEncodeDefaulter,R=l(e,{coordDimensions:I,generateCoord:D.generateCoord,encodeDefaulter:d(b)?b:b?u(m,I,t):null});h&&n(R,(function(e,n){var t=e.coordDim,s=h.categoryAxisMap.get(t);s&&(null==M&&(M=n),e.ordinalMeta=s.getOrdinalMeta(),D.createInvertedIndices&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(S=!0)})),S||null==M||(R[M].otherDims.itemName=0);var j=g(t,R),L=new f(R,t);L.setCalculationInfo(j);var N=null!=M&&function(e){if(e.sourceFormat===c){var n=function(e){var n=0;for(;n<e.length&&null==e[n];)n++;return e[n]}(e.data||[]);return null!=n&&!x(y(n))}}(e)?function(e,n,t,s){return s===M?t:this.defaultDimValueGetter(e,n,t,s)}:null;return L.hasItemOption=!1,L.initData(e,null,N),L}function A(e,n){var t=e.mapDimensionsAll("defaultedLabel"),s=t.length;if(1===s){var a=D(e,n,t[0]);return null!=a?a+"":null}if(s){for(var i=[],r=0;r<t.length;r++)i.push(D(e,n,t[r]));return i.join(" ")}}function h(e,n){var t=e.mapDimensionsAll("defaultedLabel");if(!x(n))return n+"";for(var s=[],a=0;a<t.length;a++){var i=e.getDimensionInfo(t[a]);i&&s.push(n[i.index])}return s.join(" ")}export{h as a,C as c,A as g};
