var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{a as r,u as s,_ as n,g as i,d}from"./table.3dcc7f0f.js";import{_ as u}from"./index.f97a2892.js";import{d as m,D as c,x as p,y as h,r as g,o as b,c as f,k as y,l as v,m as _,p as D,n as w,C as T,H as C,t as F,I as V,j as $}from"./vendor.910582b6.js";var x=m({components:{Layer:u},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup:(e,a)=>({ruleForm:c({name:""}),rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sort:[{required:!0,message:"请输入数字",trigger:"blur"}],select:[{required:!0,message:"请选择",trigger:"blur"}],radio:[{required:!0,message:"请选择",trigger:"blur"}]},options:[{value:1,label:"运动"},{value:2,label:"健身"},{value:3,label:"跑酷"},{value:4,label:"街舞"}]}),methods:{submit(){this.$refs.form.validate((e=>{if(!e)return!1;{let e=this.ruleForm;this.layer.row?this.updateForm(e):this.addForm(e)}}))},addForm(e){r(e).then((e=>{this.$message({type:"success",message:"新增成功"}),this.layer.show=!1,this.$emit("getTableData",!0)}))},updateForm(e){s(e).then((e=>{this.$message({type:"success",message:"编辑成功"}),this.$emit("getTableData",!1)}))}}});const j=D();p("data-v-32a8c82e");const k=w("最新开播"),q=w("最早开播"),O=w("最多观看");h();const S=j(((e,a,l,t,o,r)=>{const s=g("el-input"),n=g("el-form-item"),i=g("el-option"),d=g("el-select"),u=g("el-radio"),m=g("el-radio-group"),c=g("el-form"),p=g("Layer",!0);return b(),f(p,{layer:e.layer,onConfirm:e.submit},{default:j((()=>[y(c,{model:e.ruleForm,rules:e.rules,ref:"form","label-width":"120px",style:{"margin-right":"30px"}},{default:j((()=>[y(n,{label:"名称：",prop:"name"},{default:j((()=>[y(s,{modelValue:e.ruleForm.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.ruleForm.name=a),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),y(n,{label:"数字：",prop:"sort"},{default:j((()=>[y(s,{modelValue:e.ruleForm.sort,"onUpdate:modelValue":a[2]||(a[2]=a=>e.ruleForm.sort=a),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"只能输入正整数"},null,8,["modelValue"])])),_:1}),y(n,{label:"选择器：",prop:"select"},{default:j((()=>[y(d,{modelValue:e.ruleForm.select,"onUpdate:modelValue":a[3]||(a[3]=a=>e.ruleForm.select=a),placeholder:"请选择",clearable:""},{default:j((()=>[(b(!0),f(v,null,_(e.options,(e=>(b(),f(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(n,{label:"单选框：",prop:"radio"},{default:j((()=>[y(m,{modelValue:e.ruleForm.radio,"onUpdate:modelValue":a[4]||(a[4]=a=>e.ruleForm.radio=a)},{default:j((()=>[y(u,{label:0},{default:j((()=>[k])),_:1}),y(u,{label:1},{default:j((()=>[q])),_:1}),y(u,{label:2},{default:j((()=>[O])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["layer","onConfirm"])}));x.render=S,x.__scopeId="data-v-32a8c82e";var U=m({components:{Table:n,Layer:x},setup(){const e=c({input:""}),a=c({show:!1,title:"新增",showButton:!0}),l=c({index:1,size:20,total:0}),t=T(!0),o=T([]),r=T([]);return{query:e,tableData:o,chooseData:r,loading:t,page:l,layer:a,handleSelectionChange:e=>{r.value=e}}},mounted(){this.getTableData(!0)},methods:{getTableData(e){this.loading=!0,e&&(this.page.index=1);let r=((e,r)=>{for(var s in r||(r={}))l.call(r,s)&&o(e,s,r[s]);if(a)for(var s of a(r))t.call(r,s)&&o(e,s,r[s]);return e})({page:this.page.index,pageSize:this.page.size},this.query);i(r).then((e=>{this.tableData=e.data.list,this.page.total=Number(e.data.pager.total)})).catch((e=>{this.tableData=[],this.page.index=1,this.page.total=0})).finally((()=>{this.loading=!1}))},handleDel(e){let a={ids:e.map((e=>e.id)).join(",")};d(a).then((e=>{this.$message({type:"success",message:"删除成功"}),this.getTableData(1===this.tableData.length)}))},handleAdd(){this.layer.title="新增数据",this.layer.show=!0,delete this.layer.row},handleEdit(e){this.layer.title="编辑数据",this.layer.row=e,this.layer.show=!0}}});const I=D();p("data-v-63d52142");const G={class:"layout-container"},L={class:"layout-container-form flex space-between"},z={class:"layout-container-form-handle"},B={class:"layout-container-form-search"},E={class:"layout-container-table"};h();const P=I(((e,a,l,t,o,r)=>{const s=g("el-button"),n=g("el-popconfirm"),i=g("el-input"),d=g("el-table-column"),u=g("Table"),m=g("Layer"),c=C("loading");return b(),f("div",G,[y("div",L,[y("div",z,[y(s,{type:"primary",icon:"el-icon-circle-plus-outline",onClick:e.handleAdd},{default:I((()=>[w(F(e.$t("message.common.add")),1)])),_:1},8,["onClick"]),y(n,{title:e.$t("message.common.delTip"),onConfirm:a[1]||(a[1]=a=>e.handleDel(e.chooseData))},{reference:I((()=>[y(s,{type:"danger",icon:"el-icon-delete",disabled:0===e.chooseData.length},{default:I((()=>[w(F(e.$t("message.common.delBat")),1)])),_:1},8,["disabled"])])),_:1},8,["title"])]),y("div",B,[y(i,{modelValue:e.query.input,"onUpdate:modelValue":a[2]||(a[2]=a=>e.query.input=a),placeholder:e.$t("message.common.searchTip")},null,8,["modelValue","placeholder"]),y(s,{type:"primary",icon:"el-icon-search",class:"search-btn",onClick:a[3]||(a[3]=a=>e.getTableData(!0))},{default:I((()=>[w(F(e.$t("message.common.search")),1)])),_:1})])]),y("div",E,[V(y(u,{ref:"table",page:e.page,"onUpdate:page":a[4]||(a[4]=a=>e.page=a),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:I((()=>[y(d,{prop:"userName",label:"字典类型名称",align:"center"}),y(d,{prop:"hobby",label:"备注",align:"center"}),y(d,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"200"},{default:I((a=>[y(s,{onClick:l=>e.handleEdit(a.row)},{default:I((()=>[w(F(e.$t("message.common.update")),1)])),_:2},1032,["onClick"]),y(n,{title:e.$t("message.common.delTip"),onConfirm:l=>e.handleDel([a.row])},{reference:I((()=>[y(s,{type:"danger"},{default:I((()=>[w(F(e.$t("message.common.del")),1)])),_:1})])),_:2},1032,["title","onConfirm"])])),_:1},8,["label"])])),_:1},8,["page","data","onGetTableData","onSelectionChange"]),[[c,e.loading]]),e.layer.show?(b(),f(m,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):$("",!0)])])}));U.render=P,U.__scopeId="data-v-63d52142";export default U;
